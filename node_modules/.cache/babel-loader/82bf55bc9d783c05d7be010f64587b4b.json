{"ast":null,"code":"import _classCallCheck from \"/home/whitewolf/projekt/expedition/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/whitewolf/projekt/expedition/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/whitewolf/projekt/expedition/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/whitewolf/projekt/expedition/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/whitewolf/projekt/expedition/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/whitewolf/projekt/expedition/src/components/Options.js\";\nimport React, { Component } from 'react';\nimport firebase from 'firebase';\nimport { BasicButton } from '../styles.js';\n\nvar Options =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Options, _Component);\n\n  function Options(props) {\n    _classCallCheck(this, Options);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Options).call(this, props));\n  }\n\n  _createClass(Options, [{\n    key: \"addImage\",\n    value: function addImage() {\n      var url = '';\n      var bookRef = firebase.firestore().collection(\"Authors\").doc(this.state.authorid).collection('Books').doc(this.state.bookid);\n      var filename = this.state.filename;\n      var storageRef = firebase.storage().ref('/images/' + filename);\n      var uploadImage = storageRef.put(this.state.image);\n      uploadImage.on('state_changed', function (snapshot) {}, function (error) {}, function () {\n        uploadImage.snapshot.ref.getDownloadURL().then(function (downloadURL) {\n          url = downloadURL;\n          bookRef.update({\n            coverUrl: url\n          }).then(function () {\n            return console.log('Cover Added', url);\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var books = this.props.books;\n      return React.createElement(\"form\", {\n        onSubmit: this.addImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"file\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38\n        },\n        __self: this\n      }), React.createElement(\"select\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, books.title, \" \\u2014 \", books.author)), React.createElement(BasicButton, {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, \"Submit\"));\n    }\n  }]);\n\n  return Options;\n}(Component);\n\nexport default Options;","map":{"version":3,"sources":["/home/whitewolf/projekt/expedition/src/components/Options.js"],"names":["React","Component","firebase","BasicButton","Options","props","url","bookRef","firestore","collection","doc","state","authorid","bookid","filename","storageRef","storage","ref","uploadImage","put","image","on","snapshot","error","getDownloadURL","then","downloadURL","update","coverUrl","console","log","books","addImage","handleChange","title","author"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,SAASC,WAAT,QAA4B,cAA5B;;IAEMC,O;;;;;AACJ,mBAAYC,KAAZ,EAAmB;AAAA;;AAAA,gFACXA,KADW;AAElB;;;;+BAGU;AACT,UAAIC,GAAG,GAAG,EAAV;AACA,UAAIC,OAAO,GAAGL,QAAQ,CAACM,SAAT,GAAqBC,UAArB,CAAgC,SAAhC,EAA2CC,GAA3C,CAA+C,KAAKC,KAAL,CAAWC,QAA1D,EAAoEH,UAApE,CAA+E,OAA/E,EAAwFC,GAAxF,CAA4F,KAAKC,KAAL,CAAWE,MAAvG,CAAd;AAFS,UAIDC,QAJC,GAIY,KAAKH,KAJjB,CAIDG,QAJC;AAKT,UAAIC,UAAU,GAAGb,QAAQ,CAACc,OAAT,GAAmBC,GAAnB,CAAuB,aAAaH,QAApC,CAAjB;AACA,UAAII,WAAW,GAAGH,UAAU,CAACI,GAAX,CAAe,KAAKR,KAAL,CAAWS,KAA1B,CAAlB;AAEAF,MAAAA,WAAW,CAACG,EAAZ,CAAe,eAAf,EAAgC,UAAUC,QAAV,EAAoB,CACnD,CADD,EACG,UAAUC,KAAV,EAAiB,CACnB,CAFD,EAEG,YAAY;AACbL,QAAAA,WAAW,CAACI,QAAZ,CAAqBL,GAArB,CAAyBO,cAAzB,GACGC,IADH,CACQ,UAACC,WAAD,EAAiB;AACrBpB,UAAAA,GAAG,GAAGoB,WAAN;AACAnB,UAAAA,OAAO,CAACoB,MAAR,CAAe;AACbC,YAAAA,QAAQ,EAAEtB;AADG,WAAf,EAEGmB,IAFH,CAEQ;AAAA,mBAAMI,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BxB,GAA3B,CAAN;AAAA,WAFR;AAGD,SANH;AAOD,OAVD;AAWD;;;6BAEQ;AAAA,UACCyB,KADD,GACW,KAAK1B,KADhB,CACC0B,KADD;AAGP,aAEE;AAAM,QAAA,QAAQ,EAAE,KAAKC,QAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,QAAQ,EAAE,KAAKC,YAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGF,KAAK,CAACG,KADT,cACyBH,KAAK,CAACI,MAD/B,CADF,CAFF,EAOE,oBAAC,WAAD;AAAa,QAAA,IAAI,EAAC,QAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPF,CAFF;AAcD;;;;EA5CmBlC,S;;AA8CtB,eAAeG,OAAf","sourcesContent":["import React, { Component } from 'react';\nimport firebase from 'firebase';\nimport { BasicButton } from '../styles.js';\n\nclass Options extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n\n  addImage() {\n    var url = ''\n    var bookRef = firebase.firestore().collection(\"Authors\").doc(this.state.authorid).collection('Books').doc(this.state.bookid);\n\n    const { filename } = this.state;\n    var storageRef = firebase.storage().ref('/images/' + filename);\n    var uploadImage = storageRef.put(this.state.image);\n\n    uploadImage.on('state_changed', function (snapshot) {\n    }, function (error) {\n    }, function () {\n      uploadImage.snapshot.ref.getDownloadURL()\n        .then((downloadURL) => {\n          url = downloadURL\n          bookRef.update({\n            coverUrl: url\n          }).then(() => console.log('Cover Added', url))\n        })\n    });\n  }\n\n  render() {\n    const { books } = this.props;\n\n    return (\n      \n      <form onSubmit={this.addImage}>\n        <input type=\"file\" onChange={this.handleChange} />\n        <select>\n          <option>\n            {books.title} &mdash; {books.author}\n          </option>\n        </select>\n        <BasicButton type=\"submit\">\n          Submit\n      </BasicButton>\n      </form>\n    )\n  }\n}\nexport default Options;"]},"metadata":{},"sourceType":"module"}