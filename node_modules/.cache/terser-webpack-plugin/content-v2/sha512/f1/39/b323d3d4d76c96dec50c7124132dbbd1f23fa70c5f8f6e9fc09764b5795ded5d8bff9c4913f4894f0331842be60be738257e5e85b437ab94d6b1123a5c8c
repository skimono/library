{"map":"{\"version\":3,\"sources\":[\"/home/whitewolf/projekt/expedition/src/styles.js\",\"/home/whitewolf/projekt/expedition/src/components/Login.js\",\"/home/whitewolf/projekt/expedition/src/components/Books.js\",\"/home/whitewolf/projekt/expedition/src/components/Listing.js\",\"/home/whitewolf/projekt/expedition/src/components/FormErrors.js\",\"/home/whitewolf/projekt/expedition/src/components/AddingBooks.js\",\"/home/whitewolf/projekt/expedition/src/App.js\",\"/home/whitewolf/projekt/expedition/src/components/ServiceWorker.js\",\"/home/whitewolf/projekt/expedition/src/index.js\"],\"names\":[\"Wrapper\",\"styled\",\"div\",\"_templateObject\",\"BasicPageElement\",\"_templateObject2\",\"Header\",\"_templateObject3\",\"SubHeader\",\"_templateObject4\",\"Body\",\"_templateObject5\",\"Title\",\"h1\",\"_templateObject6\",\"Greeting\",\"p\",\"_templateObject7\",\"BasicButton\",\"button\",\"_templateObject8\",\"BasicInput\",\"input\",\"_templateObject9\",\"uiConfig\",\"signInFlow\",\"signInOptions\",\"firebase\",\"auth\",\"GoogleAuthProvider\",\"PROVIDER_ID\",\"FacebookAuthProvider\",\"EmailAuthProvider\",\"callbacks\",\"signInSuccessWithAuthResult\",\"Login\",\"react_default\",\"a\",\"createElement\",\"StyledFirebaseAuth_default\",\"firebaseAuth\",\"Component\",\"Books\",\"props\",\"_this\",\"Object\",\"classCallCheck\",\"this\",\"possibleConstructorReturn\",\"getPrototypeOf\",\"call\",\"onClickSetFav\",\"favState\",\"state\",\"fav\",\"booksRef\",\"firestore\",\"collection\",\"doc\",\"books\",\"authorid\",\"id\",\"update\",\"favedBy\",\"FieldValue\",\"arrayRemove\",\"currentUser\",\"uid\",\"then\",\"console\",\"log\",\"arrayUnion\",\"setState\",\"includes\",\"Fragment\",\"src\",\"coverUrl\",\"alt\",\"title\",\"height\",\"width\",\"author\",\"genre\",\"pages\",\"publisher\",\"language\",\"onClick\",\"className\",\"Listing\",\"align\",\"map\",\"b\",\"components_Books\",\"key\",\"FormErrors\",\"_ref\",\"formErrors\",\"keys\",\"fieldName\",\"i\",\"length\",\"AddBook\",\"handleChange\",\"e\",\"target\",\"files\",\"image\",\"currentdate\",\"Date\",\"currenttime\",\"getDate\",\"getMonth\",\"getFullYear\",\"getHours\",\"getMinutes\",\"getSeconds\",\"roz\",\"filename\",\"split\",\"pop\",\"updateInput\",\"name\",\"value\",\"defineProperty\",\"validateField\",\"addToDb\",\"preventDefault\",\"url\",\"uploadImage\",\"storage\",\"ref\",\"put\",\"on\",\"snapshot\",\"error\",\"getDownloadURL\",\"downloadURL\",\"flag\",\"authors\",\"setTimeout\",\"db\",\"add\",\"addedBy\",\"docRef\",\"addBook\",\"bookid\",\"titleValid\",\"authorValid\",\"genreValid\",\"pagesValid\",\"publisherValid\",\"languageValid\",\"bind\",\"assertThisInitialized\",\"_this2\",\"settings\",\"timestampsInSnapshots\",\"onSnapshot\",\"querySnapshot\",\"forEach\",\"push\",\"objectSpread\",\"data\",\"get\",\"docAdr\",\"bookRef\",\"fieldValidationErrors\",\"Author\",\"match\",\"Genre\",\"Pages\",\"Publisher\",\"Language\",\"validateForm\",\"formValid\",\"onSubmit\",\"type\",\"placeholder\",\"onChange\",\"disabled\",\"FormErrors_FormErrors\",\"components_Listing\",\"initializeApp\",\"apiKey\",\"authDomain\",\"databaseURL\",\"projectId\",\"storageBucket\",\"messagingSenderId\",\"App\",\"isLoggedIn\",\"unregisterAuthObserver\",\"onAuthStateChanged\",\"user\",\"displayName\",\"signOut\",\"AddingBooks\",\"components_Login\",\"Boolean\",\"window\",\"location\",\"hostname\",\"ReactDOM\",\"render\",\"src_App\",\"document\",\"getElementById\",\"navigator\",\"serviceWorker\",\"ready\",\"registration\",\"unregister\"],\"mappings\":\"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\",\"sourcesContent\":[\"import styled from 'styled-components';\\n\\nexport const Wrapper = styled.div`\\n  text-align: center;\\n`;\\n\\nconst BasicPageElement = styled.div`\\n  padding: 20px;\\n  color: white;\\n`;\\n\\nexport const Header = styled(BasicPageElement)`\\n  background-color: #222;\\n`;\\n\\nexport const SubHeader = styled(BasicPageElement)`\\n  padding: 30px;\\n  background-color: #333;\\n`;\\n\\nexport const Body =styled(BasicPageElement)`\\n  background-color: #555;\\n`;\\n\\n\\nexport const Title = styled.h1`\\n  font-size: 1.3em;\\n`;\\n\\nexport const Greeting = styled.p`\\n  color: white;\\n`;\\n\\nexport const BasicButton = styled.button`\\n  font-family: inherit;\\n  font-size: 1rem;\\n  border-radius: 0;\\n  padding: 0.25rem 1rem;\\n  margin: 0 1rem;\\n  background: transparent;\\n  color: white\\n  border: 2px solid;\\n`;\\n\\nexport const BasicInput = styled.input`\\n  font-family: inherit;\\n  font-size: 1rem;\\n  border-radius: 0;\\n  padding: 0.25rem 1rem;\\n  margin: 0 1rem;\\n  margin-bottom: 0.3rem;\\n  background: #777;\\n  color: white;\\n  border: 2px solid;\\n`;\",\"import React, { Component } from 'react';\\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\\nimport firebase from 'firebase';\\nimport { Wrapper, Header, Title, Greeting} from '../styles.js';\\n\\nconst uiConfig = {\\n  signInFlow: 'popup',\\n  signInOptions: [\\n    firebase.auth.GoogleAuthProvider.PROVIDER_ID,\\n    firebase.auth.FacebookAuthProvider.PROVIDER_ID,\\n    firebase.auth.EmailAuthProvider.PROVIDER_ID\\n  ],\\n  callbacks: {\\n    signInSuccessWithAuthResult: () => false\\n  }\\n};\\n\\nclass Login extends Component {\\n  render() {\\n    return (\\n      <Wrapper>\\n          <Header>\\n            <Title>Library test app for Expedition project</Title>\\n            <Greeting>Please Log-in:</Greeting>\\n            {\\n              <StyledFirebaseAuth\\n                uiConfig={uiConfig}\\n                firebaseAuth={firebase.auth()}\\n              />\\n            }\\n          </Header>\\n      </Wrapper>\\n    );\\n  }\\n}\\n\\nexport default Login;\",\"import React, { Component } from 'react';\\nimport firebase from 'firebase'\\n\\nclass Books extends Component {\\n  constructor(props) {\\n    super(props);\\n    this.state = {\\n      fav: false,\\n    };\\n  }\\n\\n  componentDidMount() {\\n    let favState = this.state.fav;\\n    if (this.props.books.favedBy.includes(firebase.auth().currentUser.uid)) {\\n      favState = !favState;\\n      this.setState({ fav: favState })\\n    }\\n  }\\n\\n  onClickSetFav = () => {\\n    let favState = this.state.fav;\\n\\n    var booksRef = firebase.firestore().collection(\\\"Authors\\\").doc(this.props.books.authorid).collection('Books').doc(this.props.books.id);\\n    this.state.fav ? (\\n      booksRef.update({\\n        favedBy: firebase.firestore.FieldValue.arrayRemove(firebase.auth().currentUser.uid)\\n      }).then(() => console.log('Book unfaved'))\\n    ) : (\\n        booksRef.update({\\n          favedBy: firebase.firestore.FieldValue.arrayUnion(firebase.auth().currentUser.uid)\\n        }).then(() => console.log('Book faved'))\\n      )\\n\\n    favState = !favState;\\n    this.setState({ fav: favState });\\n  };\\n\\n  render() {\\n    const { books } = this.props;\\n\\n    return (\\n      <React.Fragment>\\n        <tr>\\n          <td>\\n            <img src={books.coverUrl} alt={books.title + ' cover'} height='300' width='225' />\\n          </td>\\n          <td>{books.title}</td>\\n          <td>{books.author}</td>\\n          <td>{books.genre}</td>\\n          <td>{books.pages}</td>\\n          <td>{books.publisher}</td>\\n          <td>{books.language}</td>\\n          <td><button onClick={this.onClickSetFav}>\\n            {this.state.fav ? (\\n              <i className=\\\"fas fa-heart\\\" />\\n            ) : (\\n              <i className=\\\"far fa-heart\\\" />\\n            )}\\n          </button></td>\\n        </tr>\\n      </React.Fragment>\\n    );\\n  }\\n}\\nexport default Books;\\n\",\"import React, { Component } from 'react'\\nimport Books from './Books'\\n\\nclass Listing extends Component {\\n\\n    render() {\\n        const { books } = this.props\\n\\n        return (\\n            <div>\\n                <p>List of known books:</p>\\n                <table align=\\\"center\\\">\\n                <tbody>\\n                    <tr>\\n                        <th>Cover</th>\\n                        <th>Title</th>\\n                        <th>Author</th>\\n                        <th>Genre</th>\\n                        <th>Pages</th>\\n                        <th>Publisher</th>\\n                        <th>Language</th>\\n                        <th>Favorite</th>\\n                    </tr>\\n                    {books.map(b =>\\n                        <Books key={b.id} books={b} />\\n                    )}\\n                     </tbody>\\n                </table>\\n            </div>\\n        )\\n    }\\n}\\nexport default Listing;\",\"import React from 'react';\\n\\nexport const FormErrors = ({ formErrors }) => (\\n  <div className=\\\"formErrors\\\">\\n    {Object.keys(formErrors).map((fieldName, i) => {\\n      if (formErrors[fieldName].length > 0) {\\n        return (\\n          <p key={i}>\\n            {fieldName} {formErrors[fieldName]}\\n          </p>\\n        );\\n      } else {\\n        return '';\\n      }\\n    })}\\n  </div>\\n);\",\"import React, { Component } from 'react'\\nimport firebase from 'firebase'\\nimport Listing from './Listing';\\nimport { FormErrors } from './FormErrors';\\nimport { BasicButton, BasicInput, SubHeader, Body } from '../styles.js';\\n\\n\\nclass AddBook extends Component {\\n\\n    constructor(props) {\\n        super(props);\\n        this.state = {\\n            authorid: ' ',\\n            bookid: ' ',\\n            authors: [],\\n            books: [],\\n            title: '',\\n            author: '',\\n            genre: '',\\n            pages: '',\\n            publisher: '',\\n            language: '',\\n            image: null,\\n            filename: '',\\n            formErrors: {\\n                title: '',\\n                author: '',\\n                genre: '',\\n                pages: '',\\n                publisher: '',\\n                language: ''\\n            },\\n            titleValid: false,\\n            authorValid: false,\\n            genreValid: false,\\n            pagesValid: false,\\n            publisherValid: false,\\n            languageValid: false\\n        };\\n        this.addToDb = this.addToDb.bind(this);\\n        this.handleChange = this.handleChange.bind(this);\\n    }\\n\\n    handleChange = e => {\\n        if (e.target.files[0]) {\\n            const image = e.target.files[0];\\n            this.setState(() => ({ image }))\\n\\n            var currentdate = new Date();\\n            var currenttime = currentdate.getDate() + \\\"-\\\"\\n            + (currentdate.getMonth() + 1) + \\\"-\\\"\\n            + currentdate.getFullYear() + \\\"_\\\"\\n            + currentdate.getHours() + \\\":\\\"\\n            + currentdate.getMinutes() + \\\":\\\"\\n            + currentdate.getSeconds() + \\\"_\\\"\\n            + firebase.auth().currentUser.uid;\\n            var filenametemp = this.state.filename.split('.')\\n            var roz = filenametemp.pop()\\n            this.setState({ filename: (currenttime + roz) })\\n            console.log(this.state.filename)\\n        }\\n    }\\n\\n    updateInput = e => {\\n        const name = e.target.name;\\n        const value = e.target.value;\\n        this.setState(\\n            {\\n                [name]: value\\n            },\\n            () => {\\n                this.validateField(name, value);\\n            }\\n        );\\n    };\\n\\n    componentDidMount() {\\n        const settings = { timestampsInSnapshots: true };\\n        firebase.firestore().settings(settings);\\n\\n        var db = firebase.firestore()\\n        db.collection('Authors')\\n            .onSnapshot(querySnapshot => {\\n                const authors = []\\n                querySnapshot.forEach(doc =>\\n                    authors.push({ id: doc.id, ...doc.data() })\\n                )\\n                this.setState({ authors: authors })\\n                const books = []\\n                this.state.authors.forEach(author =>\\n                    db.collection('Authors').doc(author.id).collection('Books')\\n                        .get().then(querySnapshot => {\\n                            querySnapshot.forEach(doc =>\\n                                books.push({\\n                                    id: doc.id,\\n                                    authorid: author.id,\\n                                    author: author.name,\\n                                    ...doc.data()\\n                                })\\n                            )\\n                            this.setState({ books: books })\\n                        })\\n                )\\n            })\\n        console.log('Got Books')\\n    }\\n\\n    addBook(db, docAdr, url) {\\n        console.log('Author added', docAdr);\\n        db.doc(docAdr).collection('Books').add({\\n            title: this.state.title,\\n            genre: this.state.genre,\\n            pages: this.state.pages,\\n            publisher: this.state.publisher,\\n            language: this.state.language,\\n            coverUrl: url,\\n            favedBy: []\\n        }).then(docRef => console.log('Book added', docRef.id)).then(() => {\\n            // window.location.reload();\\n        });\\n    }\\n\\n    addImage(url) {\\n        var bookRef = firebase.firestore().collection(\\\"Authors\\\").doc(this.state.authorid).collection('Books').doc(this.state.bookid);\\n\\n        const { filename } = this.state;\\n\\n        var storageRef = firebase.storage().ref('/images/' + filename);\\n        var uploadImage = storageRef.put(this.state.image);\\n\\n        uploadImage.on('state_changed', function (snapshot) {\\n        }, function (error) {\\n        }, function () {\\n            uploadImage.snapshot.ref.getDownloadURL()\\n                .then((downloadURL) => {\\n                    url = downloadURL\\n                    bookRef.update({\\n                        coverUrl: url\\n                    }).then(() => console.log('Cover Added', url))\\n                })\\n        });\\n    }\\n\\n    addToDb = e => {\\n        e.preventDefault();\\n\\n        var url = null\\n        const { filename } = this.state;\\n        var storageRef = firebase.storage().ref('/images/' + filename);\\n        var uploadImage = storageRef.put(this.state.image);\\n\\n        uploadImage.on('state_changed', function (snapshot) {\\n        }, function (error) {\\n        }, function () {\\n            uploadImage.snapshot.ref.getDownloadURL()\\n                .then((downloadURL) => {\\n                    url = downloadURL\\n                    console.log('Cover Added', url)\\n                })\\n        });\\n\\n        let author = this.state.author\\n        var flag = null\\n        this.state.authors.map(function (e) {\\n            if (e.name == author) {\\n                flag = e.id\\n                console.log('author id from flag', flag)\\n            }\\n        })\\n\\n        setTimeout(() => {\\n            var db = firebase.firestore().collection('Authors')\\n            if (flag == null) {\\n                db.add({\\n                    name: this.state.author,\\n                    addedBy: firebase.auth().currentUser.uid\\n                }).then(docRef => {\\n                    this.addBook(db, docRef, url);\\n                })\\n            } else {\\n                this.addBook(db, flag, url);\\n            }\\n        }, 3000);\\n\\n    };\\n\\n    validateField(fieldName, value) {\\n        let fieldValidationErrors = this.state.formErrors;\\n        let titleValid = this.state.titleValid;\\n        let authorValid = this.state.authorValid;\\n        let genreValid = this.state.genreValid;\\n        let pagesValid = this.state.pagesValid;\\n        let publisherValid = this.state.publisherValid;\\n        let languageValid = this.state.languageValid;\\n\\n        switch (fieldName) {\\n            case 'title':\\n                titleValid = value.length >= 1;\\n                fieldValidationErrors.Title = titleValid ? '' : ' is missing';\\n                break;\\n            case 'author':\\n                authorValid = value.length >= 1;\\n                fieldValidationErrors.Author = authorValid ? '' : ' is missing';\\n                break;\\n            case 'genre':\\n                genreValid = value.length >= 3 && !value.match('[0-9]+'); //s-f\\n                fieldValidationErrors.Genre = genreValid\\n                    ? ''\\n                    : ' is too short or contains number';\\n                break;\\n            case 'pages':\\n                pagesValid = value.match('^[0-9]+$') && !value.match('^[0]+');\\n                fieldValidationErrors.Pages = pagesValid\\n                    ? ''\\n                    : ' must contain number';\\n                break;\\n            case 'publisher':\\n                publisherValid = value.length >= 3;\\n                fieldValidationErrors.Publisher = publisherValid ? '' : ' is too short';\\n                break;\\n            case 'language':\\n                languageValid = value.length >= 2; //PL\\n                fieldValidationErrors.Language = languageValid ? '' : ' is too short';\\n                break;\\n            default:\\n                break;\\n        }\\n        this.setState(\\n            {\\n                formErrors: fieldValidationErrors,\\n                titleValid,\\n                authorValid,\\n                genreValid,\\n                pagesValid,\\n                publisherValid,\\n                languageValid\\n            },\\n            this.validateForm\\n        );\\n    }\\n\\n    validateForm() {\\n        this.setState({\\n            formValid:\\n                this.state.titleValid &&\\n                this.state.authorValid &&\\n                this.state.genreValid &&\\n                this.state.pagesValid &&\\n                this.state.publisherValid &&\\n                this.state.languageValid\\n        });\\n    }\\n\\n    render() {\\n\\n        return (\\n            <React.Fragment>\\n                <SubHeader>\\n                    <div>\\n                        <p>Add additional books:</p>\\n                        <form onSubmit={this.addToDb}>\\n                            <BasicInput\\n                                type=\\\"text\\\"\\n                                name=\\\"title\\\"\\n                                placeholder=\\\"Title\\\"\\n                                onChange={this.updateInput}\\n                                value={this.state.title}\\n                            />\\n                            <BasicInput\\n                                type=\\\"text\\\"\\n                                name=\\\"author\\\"\\n                                placeholder=\\\"Author\\\"\\n                                onChange={this.updateInput}\\n                                value={this.state.author}\\n                            />\\n                            <BasicInput\\n                                type=\\\"text\\\"\\n                                name=\\\"genre\\\"\\n                                placeholder=\\\"Genre\\\"\\n                                onChange={this.updateInput}\\n                                value={this.state.genre}\\n                            />\\n                            <BasicInput\\n                                type=\\\"text\\\"\\n                                name=\\\"pages\\\"\\n                                placeholder=\\\"Pages\\\"\\n                                onChange={this.updateInput}\\n                                value={this.state.pages}\\n                            />\\n                            <BasicInput\\n                                type=\\\"text\\\"\\n                                name=\\\"publisher\\\"\\n                                placeholder=\\\"Publisher\\\"\\n                                onChange={this.updateInput}\\n                                value={this.state.publisher}\\n                            />\\n                            <BasicInput\\n                                type=\\\"text\\\"\\n                                name=\\\"language\\\"\\n                                placeholder=\\\"Language\\\"\\n                                onChange={this.updateInput}\\n                                value={this.state.language}\\n                            />\\n                            <input type=\\\"file\\\" onChange={this.handleChange} />\\n                            <div>\\n                                <BasicButton type=\\\"submit\\\" disabled={!this.state.formValid}>\\n                                    Submit\\n                            </BasicButton>\\n                            </div>\\n                        </form>\\n                        <FormErrors formErrors={this.state.formErrors} />\\n                    </div>\\n                    <br />\\n                    <br />\\n                </SubHeader>\\n                <Body>\\n                    <Listing books={this.state.books} />\\n                </Body>\\n            </React.Fragment>\\n        );\\n    }\\n\\n}\\nexport default AddBook;\",\"import React, { Component } from 'react';\\nimport Login from './components/Login';\\nimport AddingBook from './components/AddingBooks';\\nimport firebase from 'firebase';\\nimport { Wrapper, Header, Title, Greeting, BasicButton } from './styles.js';\\n\\nvar config = {\\n  //firebase setup\\n  apiKey: 'AIzaSyDb6MxVPz02Dzu6TBU6uRMZk6lSfsEuH8E',\\n  authDomain: 'solwit-pjatk-arc-2018-gr3.firebaseapp.com',\\n  databaseURL: 'https://solwit-pjatk-arc-2018-gr3.firebaseio.com/',\\n  projectId: 'solwit-pjatk-arc-2018-gr3',\\n  storageBucket: 'solwit-pjatk-arc-2018-gr3.appspot.com',\\n  messagingSenderId: '314895835823'\\n};\\nfirebase.initializeApp(config);\\n\\nclass App extends Component {\\n  state = {\\n    isLoggedIn: false,\\n  };\\n\\n  componentDidMount() {\\n    this.unregisterAuthObserver = firebase\\n      .auth()\\n      .onAuthStateChanged(user => this.setState({ isLoggedIn: !!user }));\\n  }\\n\\n  componentWillUnmount() {\\n    this.unregisterAuthObserver();\\n  }\\n\\n  render() {\\n    const { isLoggedIn } = this.state;\\n\\n    if (!isLoggedIn) {\\n      return <Login />;\\n    } else {\\n      return (\\n        <Wrapper>\\n          <Header>\\n            <Title>Library test app for Expedition project</Title>\\n            <Greeting>\\n              Welcome {firebase.auth().currentUser.displayName}! You are now logged-in!\\n            </Greeting>\\n            <BasicButton onClick={() => firebase.auth().signOut()}>Logout</BasicButton>\\n          </Header>\\n            <AddingBook />\\n        </Wrapper>\\n      );\\n    }\\n  }\\n}\\n\\nexport default App;\\n\",\"// This optional code is used to register a service worker.\\n// register() is not called by default.\\n\\n// This lets the app load faster on subsequent visits in production, and gives\\n// it offline capabilities. However, it also means that developers (and users)\\n// will only see deployed updates on subsequent visits to a page, after all the\\n// existing tabs open on the page have been closed, since previously cached\\n// resources are updated in the background.\\n\\n// To learn more about the benefits of this model and instructions on how to\\n// opt-in, read http://bit.ly/CRA-PWA\\n\\nconst isLocalhost = Boolean(\\n  window.location.hostname === 'localhost' ||\\n    // [::1] is the IPv6 localhost address.\\n    window.location.hostname === '[::1]' ||\\n    // 127.0.0.1/8 is considered localhost for IPv4.\\n    window.location.hostname.match(\\n      /^127(?:\\\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\\n    )\\n);\\n\\nexport function register(config) {\\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\\n    // The URL constructor is available in all browsers that support SW.\\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\\n    if (publicUrl.origin !== window.location.origin) {\\n      // Our service worker won't work if PUBLIC_URL is on a different origin\\n      // from what our page is served on. This might happen if a CDN is used to\\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\\n      return;\\n    }\\n\\n    window.addEventListener('load', () => {\\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\\n\\n      if (isLocalhost) {\\n        // This is running on localhost. Let's check if a service worker still exists or not.\\n        checkValidServiceWorker(swUrl, config);\\n\\n        // Add some additional logging to localhost, pointing developers to the\\n        // service worker/PWA documentation.\\n        navigator.serviceWorker.ready.then(() => {\\n          console.log(\\n            'This web app is being served cache-first by a service ' +\\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\\n          );\\n        });\\n      } else {\\n        // Is not localhost. Just register service worker\\n        registerValidSW(swUrl, config);\\n      }\\n    });\\n  }\\n}\\n\\nfunction registerValidSW(swUrl, config) {\\n  navigator.serviceWorker\\n    .register(swUrl)\\n    .then(registration => {\\n      registration.onupdatefound = () => {\\n        const installingWorker = registration.installing;\\n        if (installingWorker == null) {\\n          return;\\n        }\\n        installingWorker.onstatechange = () => {\\n          if (installingWorker.state === 'installed') {\\n            if (navigator.serviceWorker.controller) {\\n              // At this point, the updated precached content has been fetched,\\n              // but the previous service worker will still serve the older\\n              // content until all client tabs are closed.\\n              console.log(\\n                'New content is available and will be used when all ' +\\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\\n              );\\n\\n              // Execute callback\\n              if (config && config.onUpdate) {\\n                config.onUpdate(registration);\\n              }\\n            } else {\\n              // At this point, everything has been precached.\\n              // It's the perfect time to display a\\n              // \\\"Content is cached for offline use.\\\" message.\\n              console.log('Content is cached for offline use.');\\n\\n              // Execute callback\\n              if (config && config.onSuccess) {\\n                config.onSuccess(registration);\\n              }\\n            }\\n          }\\n        };\\n      };\\n    })\\n    .catch(error => {\\n      console.error('Error during service worker registration:', error);\\n    });\\n}\\n\\nfunction checkValidServiceWorker(swUrl, config) {\\n  // Check if the service worker can be found. If it can't reload the page.\\n  fetch(swUrl)\\n    .then(response => {\\n      // Ensure service worker exists, and that we really are getting a JS file.\\n      const contentType = response.headers.get('content-type');\\n      if (\\n        response.status === 404 ||\\n        (contentType != null && contentType.indexOf('javascript') === -1)\\n      ) {\\n        // No service worker found. Probably a different app. Reload the page.\\n        navigator.serviceWorker.ready.then(registration => {\\n          registration.unregister().then(() => {\\n            window.location.reload();\\n          });\\n        });\\n      } else {\\n        // Service worker found. Proceed as normal.\\n        registerValidSW(swUrl, config);\\n      }\\n    })\\n    .catch(() => {\\n      console.log(\\n        'No internet connection found. App is running in offline mode.'\\n      );\\n    });\\n}\\n\\nexport function unregister() {\\n  if ('serviceWorker' in navigator) {\\n    navigator.serviceWorker.ready.then(registration => {\\n      registration.unregister();\\n    });\\n  }\\n}\\n\",\"import React from 'react';\\nimport ReactDOM from 'react-dom';\\nimport './index.css';\\nimport App from './App';\\nimport * as ServiceWorker from './components/ServiceWorker'\\n\\nReactDOM.render(<App />, document.getElementById('root'));\\n\\nServiceWorker.unregister();\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,a){e.exports=a(57)},34:function(e,t,a){},57:function(e,t,a){\"use strict\";a.r(t);var n=a(0),r=a.n(n),o=a(13),i=a.n(o),l=(a(34),a(3)),u=a(4),s=a(7),c=a(5),h=a(6),d=a(25),m=a.n(d),g=a(2),f=a.n(g),p=a(8),b=a(9);function v(){var e=Object(p.a)([\"\\n  font-family: inherit;\\n  font-size: 1rem;\\n  border-radius: 0;\\n  padding: 0.25rem 1rem;\\n  margin: 0 1rem;\\n  margin-bottom: 0.3rem;\\n  background: #777;\\n  color: white;\\n  border: 2px solid;\\n\"]);return v=function(){return e},e}function E(){var e=Object(p.a)([\"\\n  font-family: inherit;\\n  font-size: 1rem;\\n  border-radius: 0;\\n  padding: 0.25rem 1rem;\\n  margin: 0 1rem;\\n  background: transparent;\\n  color: white\\n  border: 2px solid;\\n\"]);return E=function(){return e},e}function k(){var e=Object(p.a)([\"\\n  color: white;\\n\"]);return k=function(){return e},e}function j(){var e=Object(p.a)([\"\\n  font-size: 1.3em;\\n\"]);return j=function(){return e},e}function O(){var e=Object(p.a)([\"\\n  background-color: #555;\\n\"]);return O=function(){return e},e}function y(){var e=Object(p.a)([\"\\n  padding: 30px;\\n  background-color: #333;\\n\"]);return y=function(){return e},e}function V(){var e=Object(p.a)([\"\\n  background-color: #222;\\n\"]);return V=function(){return e},e}function w(){var e=Object(p.a)([\"\\n  padding: 20px;\\n  color: white;\\n\"]);return w=function(){return e},e}function C(){var e=Object(p.a)([\"\\n  text-align: center;\\n\"]);return C=function(){return e},e}var I=b.a.div(C()),A=b.a.div(w()),S=Object(b.a)(A)(V()),D=Object(b.a)(A)(y()),B=Object(b.a)(A)(O()),x=b.a.h1(j()),U=b.a.p(k()),F=b.a.button(E()),L=b.a.input(v()),P={signInFlow:\"popup\",signInOptions:[f.a.auth.GoogleAuthProvider.PROVIDER_ID,f.a.auth.FacebookAuthProvider.PROVIDER_ID,f.a.auth.EmailAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},R=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:\"render\",value:function(){return r.a.createElement(I,null,r.a.createElement(S,null,r.a.createElement(x,null,\"Library test app for Expedition project\"),r.a.createElement(U,null,\"Please Log-in:\"),r.a.createElement(m.a,{uiConfig:P,firebaseAuth:f.a.auth()})))}}]),t}(n.Component),T=a(19),z=a(14),M=a(10),_=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).onClickSetFav=function(){var e=a.state.fav,t=f.a.firestore().collection(\"Authors\").doc(a.props.books.authorid).collection(\"Books\").doc(a.props.books.id);a.state.fav?t.update({favedBy:f.a.firestore.FieldValue.arrayRemove(f.a.auth().currentUser.uid)}).then(function(){return console.log(\"Book unfaved\")}):t.update({favedBy:f.a.firestore.FieldValue.arrayUnion(f.a.auth().currentUser.uid)}).then(function(){return console.log(\"Book faved\")}),e=!e,a.setState({fav:e})},a.state={fav:!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:\"componentDidMount\",value:function(){var e=this.state.fav;this.props.books.favedBy.includes(f.a.auth().currentUser.uid)&&(e=!e,this.setState({fav:e}))}},{key:\"render\",value:function(){var e=this.props.books;return r.a.createElement(r.a.Fragment,null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(\"img\",{src:e.coverUrl,alt:e.title+\" cover\",height:\"300\",width:\"225\"})),r.a.createElement(\"td\",null,e.title),r.a.createElement(\"td\",null,e.author),r.a.createElement(\"td\",null,e.genre),r.a.createElement(\"td\",null,e.pages),r.a.createElement(\"td\",null,e.publisher),r.a.createElement(\"td\",null,e.language),r.a.createElement(\"td\",null,r.a.createElement(\"button\",{onClick:this.onClickSetFav},this.state.fav?r.a.createElement(\"i\",{className:\"fas fa-heart\"}):r.a.createElement(\"i\",{className:\"far fa-heart\"})))))}}]),t}(n.Component),G=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:\"render\",value:function(){var e=this.props.books;return r.a.createElement(\"div\",null,r.a.createElement(\"p\",null,\"List of known books:\"),r.a.createElement(\"table\",{align:\"center\"},r.a.createElement(\"tbody\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"th\",null,\"Cover\"),r.a.createElement(\"th\",null,\"Title\"),r.a.createElement(\"th\",null,\"Author\"),r.a.createElement(\"th\",null,\"Genre\"),r.a.createElement(\"th\",null,\"Pages\"),r.a.createElement(\"th\",null,\"Publisher\"),r.a.createElement(\"th\",null,\"Language\"),r.a.createElement(\"th\",null,\"Favorite\")),e.map(function(e){return r.a.createElement(_,{key:e.id,books:e})}))))}}]),t}(n.Component),W=function(e){var t=e.formErrors;return r.a.createElement(\"div\",{className:\"formErrors\"},Object.keys(t).map(function(e,a){return t[e].length>0?r.a.createElement(\"p\",{key:a},e,\" \",t[e]):\"\"}))},N=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).handleChange=function(e){if(e.target.files[0]){var t=e.target.files[0];a.setState(function(){return{image:t}});var n=new Date,r=n.getDate()+\"-\"+(n.getMonth()+1)+\"-\"+n.getFullYear()+\"_\"+n.getHours()+\":\"+n.getMinutes()+\":\"+n.getSeconds()+\"_\"+f.a.auth().currentUser.uid,o=a.state.filename.split(\".\").pop();a.setState({filename:r+o}),console.log(a.state.filename)}},a.updateInput=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(z.a)({},t,n),function(){a.validateField(t,n)})},a.addToDb=function(e){e.preventDefault();var t=null,n=a.state.filename,r=f.a.storage().ref(\"/images/\"+n).put(a.state.image);r.on(\"state_changed\",function(e){},function(e){},function(){r.snapshot.ref.getDownloadURL().then(function(e){t=e,console.log(\"Cover Added\",t)})});var o=a.state.author,i=null;a.state.authors.map(function(e){e.name==o&&(i=e.id,console.log(\"author id from flag\",i))}),setTimeout(function(){var e=f.a.firestore().collection(\"Authors\");null==i?e.add({name:a.state.author,addedBy:f.a.auth().currentUser.uid}).then(function(n){a.addBook(e,n,t)}):a.addBook(e,i,t)},3e3)},a.state={authorid:\" \",bookid:\" \",authors:[],books:[],title:\"\",author:\"\",genre:\"\",pages:\"\",publisher:\"\",language:\"\",image:null,filename:\"\",formErrors:{title:\"\",author:\"\",genre:\"\",pages:\"\",publisher:\"\",language:\"\"},titleValid:!1,authorValid:!1,genreValid:!1,pagesValid:!1,publisherValid:!1,languageValid:!1},a.addToDb=a.addToDb.bind(Object(M.a)(Object(M.a)(a))),a.handleChange=a.handleChange.bind(Object(M.a)(Object(M.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:\"componentDidMount\",value:function(){var e=this;f.a.firestore().settings({timestampsInSnapshots:!0});var t=f.a.firestore();t.collection(\"Authors\").onSnapshot(function(a){var n=[];a.forEach(function(e){return n.push(Object(T.a)({id:e.id},e.data()))}),e.setState({authors:n});var r=[];e.state.authors.forEach(function(a){return t.collection(\"Authors\").doc(a.id).collection(\"Books\").get().then(function(t){t.forEach(function(e){return r.push(Object(T.a)({id:e.id,authorid:a.id,author:a.name},e.data()))}),e.setState({books:r})})})}),console.log(\"Got Books\")}},{key:\"addBook\",value:function(e,t,a){console.log(\"Author added\",t),e.doc(t).collection(\"Books\").add({title:this.state.title,genre:this.state.genre,pages:this.state.pages,publisher:this.state.publisher,language:this.state.language,coverUrl:a,favedBy:[]}).then(function(e){return console.log(\"Book added\",e.id)}).then(function(){})}},{key:\"addImage\",value:function(e){var t=f.a.firestore().collection(\"Authors\").doc(this.state.authorid).collection(\"Books\").doc(this.state.bookid),a=this.state.filename,n=f.a.storage().ref(\"/images/\"+a).put(this.state.image);n.on(\"state_changed\",function(e){},function(e){},function(){n.snapshot.ref.getDownloadURL().then(function(a){e=a,t.update({coverUrl:e}).then(function(){return console.log(\"Cover Added\",e)})})})}},{key:\"validateField\",value:function(e,t){var a=this.state.formErrors,n=this.state.titleValid,r=this.state.authorValid,o=this.state.genreValid,i=this.state.pagesValid,l=this.state.publisherValid,u=this.state.languageValid;switch(e){case\"title\":n=t.length>=1,a.Title=n?\"\":\" is missing\";break;case\"author\":r=t.length>=1,a.Author=r?\"\":\" is missing\";break;case\"genre\":o=t.length>=3&&!t.match(\"[0-9]+\"),a.Genre=o?\"\":\" is too short or contains number\";break;case\"pages\":i=t.match(\"^[0-9]+$\")&&!t.match(\"^[0]+\"),a.Pages=i?\"\":\" must contain number\";break;case\"publisher\":l=t.length>=3,a.Publisher=l?\"\":\" is too short\";break;case\"language\":u=t.length>=2,a.Language=u?\"\":\" is too short\"}this.setState({formErrors:a,titleValid:n,authorValid:r,genreValid:o,pagesValid:i,publisherValid:l,languageValid:u},this.validateForm)}},{key:\"validateForm\",value:function(){this.setState({formValid:this.state.titleValid&&this.state.authorValid&&this.state.genreValid&&this.state.pagesValid&&this.state.publisherValid&&this.state.languageValid})}},{key:\"render\",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,null,r.a.createElement(\"div\",null,r.a.createElement(\"p\",null,\"Add additional books:\"),r.a.createElement(\"form\",{onSubmit:this.addToDb},r.a.createElement(L,{type:\"text\",name:\"title\",placeholder:\"Title\",onChange:this.updateInput,value:this.state.title}),r.a.createElement(L,{type:\"text\",name:\"author\",placeholder:\"Author\",onChange:this.updateInput,value:this.state.author}),r.a.createElement(L,{type:\"text\",name:\"genre\",placeholder:\"Genre\",onChange:this.updateInput,value:this.state.genre}),r.a.createElement(L,{type:\"text\",name:\"pages\",placeholder:\"Pages\",onChange:this.updateInput,value:this.state.pages}),r.a.createElement(L,{type:\"text\",name:\"publisher\",placeholder:\"Publisher\",onChange:this.updateInput,value:this.state.publisher}),r.a.createElement(L,{type:\"text\",name:\"language\",placeholder:\"Language\",onChange:this.updateInput,value:this.state.language}),r.a.createElement(\"input\",{type:\"file\",onChange:this.handleChange}),r.a.createElement(\"div\",null,r.a.createElement(F,{type:\"submit\",disabled:!this.state.formValid},\"Submit\"))),r.a.createElement(W,{formErrors:this.state.formErrors})),r.a.createElement(\"br\",null),r.a.createElement(\"br\",null)),r.a.createElement(B,null,r.a.createElement(G,{books:this.state.books})))}}]),t}(n.Component);f.a.initializeApp({apiKey:\"AIzaSyDb6MxVPz02Dzu6TBU6uRMZk6lSfsEuH8E\",authDomain:\"solwit-pjatk-arc-2018-gr3.firebaseapp.com\",databaseURL:\"https://solwit-pjatk-arc-2018-gr3.firebaseio.com/\",projectId:\"solwit-pjatk-arc-2018-gr3\",storageBucket:\"solwit-pjatk-arc-2018-gr3.appspot.com\",messagingSenderId:\"314895835823\"});var H=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={isLoggedIn:!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:\"componentDidMount\",value:function(){var e=this;this.unregisterAuthObserver=f.a.auth().onAuthStateChanged(function(t){return e.setState({isLoggedIn:!!t})})}},{key:\"componentWillUnmount\",value:function(){this.unregisterAuthObserver()}},{key:\"render\",value:function(){return this.state.isLoggedIn?r.a.createElement(I,null,r.a.createElement(S,null,r.a.createElement(x,null,\"Library test app for Expedition project\"),r.a.createElement(U,null,\"Welcome \",f.a.auth().currentUser.displayName,\"! You are now logged-in!\"),r.a.createElement(F,{onClick:function(){return f.a.auth().signOut()}},\"Logout\")),r.a.createElement(N,null)):r.a.createElement(R,null)}}]),t}(n.Component);Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(H,null),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[29,2,1]]]);","extractedComments":[]}